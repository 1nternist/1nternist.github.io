#!/bin/bash

#  arm2armv7
#  ARMv6-on-A6
#
#
#

set -e

ARMV7="/usr/local/bin/arm2armv7"

test $# -eq 1

cp -p "$1" "$1.new"
${ARMV7} "$1" "$1.new"

test -e "$1.org" || mv "$1" "$1.org"
mv "$1.new" "$1"
/usr/bin/ldid -S "$1"
rm -rf "$1.org"
