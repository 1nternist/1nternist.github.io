#!/bin/sh

#  armv72armv7s
#  Convert armv7 to armv7s
#
#  Script by: Chir0student <chir0student@me.com>
#

set -e

ARMV7S="/usr/local/bin/armv72armv7s"

test $# -eq 1

cp -p "$1" "$1.new"
${ARMV7S} "$1" "$1.new"
mv -f "$1" "$1.orig"
lipo -create -arch armv7 "$1.orig" -arch armv7s "$1.new" -output "$1"
chown root:wheel "$1"
chmod 755 "$1"
/usr/bin/ldid -S "$1"
rm -rf "$1.orig"
rm -rf "$1.new"

exit 0
